<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Wed Jan 13 15:11:31 EST 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>com.basho.riak.client.core.query.indexes (Riak Client for Java 2.0.4 API)</title>
<meta name="date" content="2016-01-13">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="com.basho.riak.client.core.query.indexes (Riak Client for Java 2.0.4 API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../com/basho/riak/client/core/query/functions/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../../../../com/basho/riak/client/core/query/links/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?com/basho/riak/client/core/query/indexes/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;com.basho.riak.client.core.query.indexes</h1>
<div class="docSummary">
<div class="block">Low-level API for managing Riak Secondary Indexes (2i)</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../com/basho/riak/client/core/query/indexes/BigIntIndex.html" title="class in com.basho.riak.client.core.query.indexes">BigIntIndex</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../../com/basho/riak/client/core/query/indexes/BigIntIndex.Name.html" title="class in com.basho.riak.client.core.query.indexes">BigIntIndex.Name</a></td>
<td class="colLast">
<div class="block">Encapsulates the name and <code>IndexType</code> for a <code>BigIntIndex</code></div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../com/basho/riak/client/core/query/indexes/LongIntIndex.html" title="class in com.basho.riak.client.core.query.indexes">LongIntIndex</a></td>
<td class="colLast">
<div class="block"><code>RiakIndex</code> implementation used to access a Riak <code>_int</code> Secondary Index using <code>Long</code> values.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../../com/basho/riak/client/core/query/indexes/LongIntIndex.Name.html" title="class in com.basho.riak.client.core.query.indexes">LongIntIndex.Name</a></td>
<td class="colLast">
<div class="block">Encapsulates the name and <code>IndexType</code> for a <code>LongIntIndex</code></div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../com/basho/riak/client/core/query/indexes/RawIndex.html" title="class in com.basho.riak.client.core.query.indexes">RawIndex</a></td>
<td class="colLast">
<div class="block"><code>RiakIndex</code> implementation used to access a Riak <code>_int</code> or <code>_bin</code> 
 Secondary Index using <code>BinaryValue</code> (<code>byte[]</code>) values.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../../com/basho/riak/client/core/query/indexes/RawIndex.Name.html" title="class in com.basho.riak.client.core.query.indexes">RawIndex.Name</a></td>
<td class="colLast">
<div class="block">Encapsulates the name and <code>IndexType</code> for a <code>RawIndex</code></div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../com/basho/riak/client/core/query/indexes/RiakIndex.html" title="class in com.basho.riak.client.core.query.indexes">RiakIndex</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">Abstract base class for modeling a Riak Secondary Index (2i).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../../com/basho/riak/client/core/query/indexes/RiakIndex.Name.html" title="class in com.basho.riak.client.core.query.indexes">RiakIndex.Name</a>&lt;T extends <a href="../../../../../../../com/basho/riak/client/core/query/indexes/RiakIndex.html" title="class in com.basho.riak.client.core.query.indexes">RiakIndex</a>&gt;</td>
<td class="colLast">
<div class="block">Abstract base class used to encapsulate a <code>RiakIndex</code> name and type.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../com/basho/riak/client/core/query/indexes/RiakIndexes.html" title="class in com.basho.riak.client.core.query.indexes">RiakIndexes</a></td>
<td class="colLast">
<div class="block">Container used to instantiate and Manage <code>RiakIndex</code> objects to be used with a <code>RiakObject</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../../../com/basho/riak/client/core/query/indexes/StringBinIndex.html" title="class in com.basho.riak.client.core.query.indexes">StringBinIndex</a></td>
<td class="colLast">
<div class="block"><code>RiakIndex</code> implementation used to access a Riak <code>_bin</code> Secondary Index using <code>String</code> values.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../com/basho/riak/client/core/query/indexes/StringBinIndex.Name.html" title="class in com.basho.riak.client.core.query.indexes">StringBinIndex.Name</a></td>
<td class="colLast">
<div class="block">Encapsulates the name, character asSet, and <code>IndexType</code> for a <code>StringBinIndex</code></div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Enum Summary table, listing enums, and an explanation">
<caption><span>Enum Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Enum</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../com/basho/riak/client/core/query/indexes/IndexType.html" title="enum in com.basho.riak.client.core.query.indexes">IndexType</a></td>
<td class="colLast">
<div class="block">Enum that encapsulates the suffix used to determine and index type in Riak.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package com.basho.riak.client.core.query.indexes Description">Package com.basho.riak.client.core.query.indexes Description</h2>
<div class="block">Low-level API for managing Riak Secondary Indexes (2i)
 
 <h4>Introduction</h4>
 Secondary Indexing (2i) in Riak gives developers the ability, at write
 time, to tag an object stored in Riak with one or more queryable values.
 <p>
 Since the KV data in Riak is completely opaque to 2i, the user must tell 2i exactly
 what attribute to index on and what its index value should be via key/value
 metadata. This is different from Search, which parses the data and builds
 indexes based on a schema. 
 </p>
 <p>
 The classes in this package provide an API for managing secondary indexes. 
 </p>
 <p><b>Important note:</b> 2i currently requires Riak to be configured to 
 use the eleveldb or memory backend. The default bitcask backend does not support
 2i.
 </p> 
 <h4>Overview</h4>
 In Riak there are two types of secondary indexes; "integer" and "binary". 
 The former represents an index with numeric values whereas the second is used
 for textual (String) data. The server API distinguishes between the two via 
 a suffix (<code>"_int"</code> and <code>"_bin"</code> respectively) added to the index's 
 name. In the client this is encapsulated in the 
 <a href="../../../../../../../com/basho/riak/client/core/query/indexes/IndexType.html" title="enum in com.basho.riak.client.core.query.indexes"><code>IndexType</code></a> enum. When specifying 
 an index name you do not have to append this suffix; it's done automatically.
 <p> A <a href="../../../../../../../com/basho/riak/client/core/query/indexes/RiakIndex.html" title="class in com.basho.riak.client.core.query.indexes"><code>RiakIndex</code></a> is made up of the index name, it's type,
 then one or more queryable index values. 
 </p>
 <p>
 <code>RiakIndex</code> instances are created and managed via the <a href="../../../../../../../com/basho/riak/client/core/query/indexes/RiakIndexes.html" title="class in com.basho.riak.client.core.query.indexes"><code>RiakIndexes</code></a>
 container. The container is stored in a <a href="../../../../../../../com/basho/riak/client/core/query/RiakObject.html" title="class in com.basho.riak.client.core.query"><code>RiakObject</code></a>.
 </p>
 <h4>Working with RiakIndexes</h4>
 <p>Data in Riak, including secondary indexes, is stored as raw bytes. The conversion
 to and from bytes is handled by the concrete <code>RiakIndex</code> implementations 
 and all indexes are managed by the <code>RiakIndexes</code> container. 
 <p>
 Each concrete <code>RiakIndex</code> includes a hybrid builder class named <code>Name</code>. 
 The methods of this class take an instance of that builder as an 
 argument to allow for proper type inference and construction of <code>RiakIndex</code>
 objects to expose. 
 </p>
 <p>The <code>RiakIndexes</code>' <code>getIndex()</code> method will either return a reference to 
 the existing <code>RiakIndex</code> or atomically add and return a new one. The
 returned reference is of the type provided by the <code>Name</code> and is the 
 mutable index; changes are made directly to it.
 </p>
 <blockquote><pre>
 RiakIndexes myIndexes = riakObject.getIndexes();
 LongIntIndex myIndex = myIndexes.getIndex(new LongIntIndex.Name("number_on_hand"));
 myIndex.removeAll();
 myIndex.add(6L);
 </pre></blockquote>
 <p>Calls can be chained, allowing for easy addition or removal of values from 
 an index.
 </p>
 <blockquote><pre>
 riakObject.getIndexes()
           .getIndex(new StringBinIndex.Name("colors"))
           .remove("blue")
           .add("red");
 </pre></blockquote>
 <h6>Special note when using RawIndex</h6>
 A <code>RiakIndex</code> is uniquely identified by its textual name and <code>IndexType</code> 
 regardless of the concrete <code>RiakIndex</code> implementation being used to view
 or update it. This container enforces this uniqueness by being the source of
 all <code>RiakIndex</code> instances and managing them in a thread-safe way with 
 atomic operations. 
 <p>
 What this means is that any <code>RiakIndex</code> having the same name and <code>Indextype</code>
 will refer to the same index. This is only important to note if you are mixing 
 access to the indexes using <a href="../../../../../../../com/basho/riak/client/core/query/indexes/RawIndex.html" title="class in com.basho.riak.client.core.query.indexes"><code>RawIndex</code></a>. 
 The test case below demonstrates
 the relation.</p>
 <blockquote><pre>
 public void wrapping()
 {
     // creates or fetches the BIN (_bin) index named "foo", adds a value to it  
     RawIndex index = indexes.getIndex(new RawIndex.Name("foo", IndexType.BIN));
     BinaryValue baw = BinaryValue.unsafeCreate("value".getBytes());
     index.add(baw);
       
     // fetches the previously created index as a StringBinIndex
     StringBinIndex wrapper = indexes.getIndex(new StringBinIndex.Name("foo"));

     // The references are to different objects
     assertNotSame(index, wrapper);
     // The two objects are equal ( index.equals(wrapper) == true )
     assertEquals(index, wrapper);
     // The value exists
     assertTrue(wrapper.hasValue("value"));
     
     // Removing the value via the StringBinIndex is reflected in the RawIndex
     wrapper.remove("value");
     assertFalse(index.hasValue(baw));
 }
 </pre></blockquote>
 <h6>Riak 2i _bin indexes and sorting</h6>
 <p>
 One of the key features of 2i is the ability to do range queries. As previously 
 noted the values are stored in Riak as bytes. Comparison is done byte-by-byte. UTF-8
 lends itself well to this as its byte ordering is the same as its lexical ordering.
 </p> 
 <p>
 If you are using a <code>_bin</code> index with a character asSet whose byte ordering
 differs from its lexical ordering, range queries will be affected.
 </p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a
 href="http://docs.basho.com/riak/latest/dev/using/2i/">Using Secondary
 Indexes in Riak</a></dd>
</dl>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../com/basho/riak/client/core/query/functions/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../../../../com/basho/riak/client/core/query/links/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?com/basho/riak/client/core/query/indexes/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2016. All rights reserved.</small></p>
</body>
</html>
