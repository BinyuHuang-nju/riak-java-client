<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FullColumnDescription.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Riak Client for Java</a> &gt; <a href="index.source.html" class="el_package">com.basho.riak.client.core.query.timeseries</a> &gt; <span class="el_source">FullColumnDescription.java</span></div><h1>FullColumnDescription.java</h1><pre class="source lang-java linenums">package com.basho.riak.client.core.query.timeseries;

/**
 * Holds a complete definition for a Table Column in Time Series Riak.
 * Immutable once created.
 *
 * @author Alex Moore &lt;amoore at basho dot com&gt;
 * @since 2.0.4
 */
public class FullColumnDescription extends ColumnDescription
{
    private final boolean isNullable;
    private final Integer partitionKeyOrdinal;
    private final Integer localKeyOrdinal;
    private final Quantum quantum;
    private final KeyOrder keyOrder;

    /**
     * Creates a basic FullColumnDescription, for non-key columns.
     * @param name The name of the column. Required - must not be null or an empty string.
     * @param type The type of the column. Required - must not be null.
     * @param isNullable The nullability of the column.
     * @throws IllegalArgumentException if Column Name or Column Type are null or empty.
     */
    public FullColumnDescription(String name,
                                 ColumnDescription.ColumnType type,
                                 boolean isNullable)
    {
<span class="fc" id="L29">        this(name, type, isNullable, null, null, null, null);</span>
<span class="fc" id="L30">    }</span>

    /**
     * Creates a FullColumnDescription. Useful for key columns where the partition and local key oridinals are the same.
     * @param name The name of the column. Required - must not be null or an empty string.
     * @param type The type of the column. Required - must not be null.
     * @param isNullable The nullability of the column.
     * @param keyOrdinal The ordinal number of where this column appears in the ordered Local Key column set.
     *                   &lt;b&gt;Use null if not a key column.&lt;/b&gt;
     * @throws IllegalArgumentException if Column Name or Column Type are null or empty.
     */
    public FullColumnDescription(String name,
                                 ColumnDescription.ColumnType type,
                                 boolean isNullable,
                                 Integer keyOrdinal)
    {
<span class="fc" id="L46">        this(name, type, isNullable, keyOrdinal, keyOrdinal);</span>
<span class="fc" id="L47">    }</span>

    /**
     * Creates a FullColumnDescription. Useful for key columns where the partition and local key oridinals are the same.
     * @param name The name of the column. Required - must not be null or an empty string.
     * @param type The type of the column. Required - must not be null.
     * @param isNullable The nullability of the column.
     * @param keyOrdinal The ordinal number of where this column appears in the ordered Local Key column set.
     *                   &lt;b&gt;Use null if not a key column.&lt;/b&gt;
     * @param keyOrder The order in which this key column will be sorted on disk as part of the local key.
     *                 Default is ASC.
     *                 &lt;b&gt;Use null if not a key column.&lt;/b&gt;
     * @throws IllegalArgumentException if Column Name or Column Type are null or empty.
     */
    public FullColumnDescription(String name,
                                 ColumnDescription.ColumnType type,
                                 boolean isNullable,
                                 Integer keyOrdinal,
                                 KeyOrder keyOrder)
    {
<span class="nc" id="L67">        this(name, type, isNullable, keyOrdinal, keyOrdinal, null, keyOrder);</span>
<span class="nc" id="L68">    }</span>

    /**
     * Creates a FullColumnDescription. Useful for key columns where the partition and local key oridinals are the same.
     * @param name The name of the column. Required - must not be null or an empty string.
     * @param type The type of the column. Required - must not be null.
     * @param isNullable The nullability of the column.
     * @param keyOrdinal The ordinal number of where this column appears in the ordered Local Key column set.
     *                   &lt;b&gt;Use null if not a key column.&lt;/b&gt;
     * @param quantum The {@link Quantum} setting if this column
     *                is used in partition key time quantization.
     *                &lt;b&gt;Use
     *                {@link #FullColumnDescription(String, ColumnDescription.ColumnType, boolean, Integer)}
     *                if the quantum is not needed. &lt;/b&gt;
     * @throws IllegalArgumentException if the Column Name or Column Type are null or empty,
     *                                  or if the quantum is set on a non-Timestamp column,
     *                                  or the quantum is set on a non-partition key column.
     */
    public FullColumnDescription(String name,
                                 ColumnDescription.ColumnType type,
                                 boolean isNullable,
                                 Integer keyOrdinal,
                                 Quantum quantum)
    {
<span class="fc" id="L92">        this(name, type, isNullable, keyOrdinal, keyOrdinal, quantum, null);</span>
<span class="fc" id="L93">    }</span>

    /**
     * Creates a FullColumnDescription.
     * Useful for automating creation of FullColumnDescriptions where the values can vary.
     * @param name The name of the column. Required - must not be null or an empty string.
     * @param type The type of the column. Required - must not be null.
     * @param isNullable The nullability of the column.
     * @param partitionKeyOrdinal The ordinal number of where this column appears in
     *                            the ordered Partition Key column set.
     *                            &lt;b&gt;Use null if not a key column.&lt;/b&gt;
     * @param localKeyOrdinal The ordinal number of where this column appears in
     *                        the ordered Local Key column set.
     *                        &lt;b&gt;Use null if not a key column.&lt;/b&gt;
     * @throws IllegalArgumentException if Column Name or Column Type are null or empty.
     */
    public FullColumnDescription(String name,
                                 ColumnDescription.ColumnType type,
                                 boolean isNullable,
                                 Integer partitionKeyOrdinal,
                                 Integer localKeyOrdinal)
    {
<span class="fc" id="L115">        this(name, type, isNullable, partitionKeyOrdinal, localKeyOrdinal, null, null);</span>
<span class="fc" id="L116">    }</span>

    /**
     * Creates a FullColumnDescription.
     * Useful for automating creation of FullColumnDescriptions where the values can vary.
     * @param name The name of the column. Required - must not be null or an empty string.
     * @param type The type of the column. Required - must not be null.
     * @param isNullable The nullability of the column.
     * @param partitionKeyOrdinal The ordinal number of where this column appears in
     *                            the ordered Partition Key column set.
     *                            &lt;b&gt;Use null if not a key column.&lt;/b&gt;
     * @param localKeyOrdinal The ordinal number of where this column appears in
     *                        the ordered Local Key column set.
     *                        &lt;b&gt;Use null if not a key column.&lt;/b&gt;
     * @param keyOrder The order in which this key column will be sorted on disk as part of the local key.
     *                 Default is ASC.
     *                 &lt;b&gt;Use null if not a key column.&lt;/b&gt;
     * @throws IllegalArgumentException if Column Name or Column Type are null or empty.
     */
    public FullColumnDescription(String name,
                                 ColumnDescription.ColumnType type,
                                 boolean isNullable,
                                 Integer partitionKeyOrdinal,
                                 Integer localKeyOrdinal,
                                 KeyOrder keyOrder)
    {
<span class="nc" id="L142">        this(name, type, isNullable, partitionKeyOrdinal, localKeyOrdinal, null, keyOrder);</span>
<span class="nc" id="L143">    }</span>

    /**
     * Creates a FullColumnDescription.
     * Useful for automating creation of FullColumnDescriptions where the values can vary.
     * @param name The name of the column. Required - must not be null or an empty string.
     * @param type The type of the column. Required - must not be null.
     * @param isNullable The nullability of the column.
     * @param partitionKeyOrdinal The ordinal number of where this column appears in
     *                            the ordered Partition Key column set.
     *                            &lt;b&gt;Use null if not a key column.&lt;/b&gt;
     * @param localKeyOrdinal The ordinal number of where this column appears in
     *                        the ordered Local Key column set.
     *                        &lt;b&gt;Use null if not a key column.&lt;/b&gt;
     * @param quantum The {@link Quantum} setting if this column
     *                is used in partition key time quantization.
     *                &lt;b&gt;Use
     *                {@link #FullColumnDescription(String, ColumnDescription.ColumnType, boolean, Integer, Integer)}
     *                if the quantum is not needed. &lt;/b&gt;
     * @throws IllegalArgumentException if the Column Name or Column Type are null or empty,
     *                                  or if the quantum is set on a non-Timestamp column,
     *                                  or the quantum is set on a non-partition key column.
     */
    public FullColumnDescription(String name,
                                 ColumnDescription.ColumnType type,
                                 boolean isNullable,
                                 Integer partitionKeyOrdinal,
                                 Integer localKeyOrdinal,
                                 Quantum quantum)
    {
<span class="fc" id="L173">        this(name, type, isNullable, partitionKeyOrdinal, localKeyOrdinal, quantum, null);</span>
<span class="fc" id="L174">    }</span>

    /**
     * Creates a FullColumnDescription.
     * Useful for automating creation of FullColumnDescriptions where the values can vary.
     * @param name The name of the column. Required - must not be null or an empty string.
     * @param type The type of the column. Required - must not be null.
     * @param isNullable The nullability of the column.
     * @param partitionKeyOrdinal The ordinal number of where this column appears in
     *                            the ordered Partition Key column set.
     *                            &lt;b&gt;Use null if not a key column.&lt;/b&gt;
     * @param localKeyOrdinal The ordinal number of where this column appears in
     *                        the ordered Local Key column set.
     *                        &lt;b&gt;Use null if not a key column.&lt;/b&gt;
     * @param quantum The {@link Quantum} setting if this column
     *                is used in partition key time quantization.
     *                &lt;b&gt;Use
     *                {@link #FullColumnDescription(String, ColumnDescription.ColumnType, boolean, Integer, Integer)}
     *                if the quantum is not needed. &lt;/b&gt;
     * @param keyOrder The order in which this key column will be sorted on disk as part of the local key.
     *                 Default is ASC.
     *                 &lt;b&gt;Use null if not a key column.&lt;/b&gt;
     * @throws IllegalArgumentException if the Column Name or Column Type are null or empty,
     *                                  or if the quantum is set on a non-Timestamp column,
     *                                  or the quantum is set on a non-partition key column.
     */
    public FullColumnDescription(String name,
                                 ColumnDescription.ColumnType type,
                                 boolean isNullable,
                                 Integer partitionKeyOrdinal,
                                 Integer localKeyOrdinal,
                                 Quantum quantum,
                                 KeyOrder keyOrder)
    {
<span class="fc" id="L208">        super(name, type);</span>
<span class="fc" id="L209">        this.isNullable = isNullable;</span>
<span class="fc" id="L210">        this.partitionKeyOrdinal = partitionKeyOrdinal;</span>
<span class="fc" id="L211">        this.localKeyOrdinal = localKeyOrdinal;</span>
<span class="fc" id="L212">        validateQuantumUsage(type, partitionKeyOrdinal, quantum);</span>
<span class="fc" id="L213">        this.quantum = quantum;</span>
<span class="fc" id="L214">        this.keyOrder = keyOrder;</span>
<span class="fc" id="L215">    }</span>

    private void validateQuantumUsage(ColumnType type, Integer partitionKeyOrdinal, Quantum quantum)
    {
<span class="fc bfc" id="L219" title="All 2 branches covered.">        if (quantum != null)</span>
        {
<span class="pc bpc" id="L221" title="1 of 2 branches missed.">            if (type != ColumnType.TIMESTAMP)</span>
            {
<span class="nc" id="L223">                throw new IllegalArgumentException(</span>
<span class="nc" id="L224">                        String.format(&quot;Cannot apply a quantum to a non-Timestamp type column, current column is %s.&quot;,</span>
                                      type));
            }
<span class="pc bpc" id="L227" title="1 of 2 branches missed.">            if (partitionKeyOrdinal == null)</span>
            {
<span class="nc" id="L229">                throw new IllegalArgumentException(&quot;Cannot apply a quantum to a column that is not part of the partition key.&quot;);</span>
            }
        }
<span class="fc" id="L232">    }</span>


<span class="nc" id="L235">    public enum KeyOrder</span>
    {
<span class="nc" id="L237">        ASC,</span>
<span class="nc" id="L238">        DESC</span>
    }

    /**
     * Whether this column's values are nullable.
     * @return boolean
     */
    public boolean isNullable()
    {
<span class="fc" id="L247">        return isNullable;</span>
    }

    /**
     * Whether this column is a member of the Partition Key column set.
     * @return boolean.
     */
    public boolean isPartitionKeyMember()
    {
<span class="fc bfc" id="L256" title="All 2 branches covered.">        return partitionKeyOrdinal != null;</span>
    }

    /**
     * Whether this column is a member of the Local Key column set.
     * @return boolean.
     */
    public boolean isLocalKeyMember()
    {
<span class="fc bfc" id="L265" title="All 2 branches covered.">        return localKeyOrdinal != null;</span>
    }

    /**
     * Get the ordinal number of where this column appears in the ordered Partition Key column set.
     * @return Integer if {@link #isPartitionKeyMember()} is &lt;i&gt;true&lt;/i&gt;,
     *         &lt;b&gt;null&lt;/b&gt; if {@link #isPartitionKeyMember()} is &lt;i&gt;false&lt;/i&gt;.
     */
    public Integer getPartitionKeyOrdinal()
    {
<span class="fc" id="L275">        return partitionKeyOrdinal;</span>
    }

    /**
     * Get the ordinal number of where this column appears in the ordered Local Key column set.
     * @return Integer if {@link #isLocalKeyMember()} is &lt;i&gt;true&lt;/i&gt;,
     *         &lt;b&gt;null&lt;/b&gt; if {@link #isLocalKeyMember()} is &lt;i&gt;false&lt;/i&gt;.
     */
    public Integer getLocalKeyOrdinal()
    {
<span class="fc" id="L285">        return localKeyOrdinal;</span>
    }

    /**
     * Get the quantum setting for this column, if present.
     *
     * @return a {@link Quantum} instance if this column is used in partition key time quantization.
     */
    public Quantum getQuantum()
    {
<span class="fc" id="L295">        return quantum;</span>
    }

    /**
     * Returns whether this column has any quantum information.
     * @return true if Quantum information is available, false if not.
     */
    public boolean hasQuantum()
    {
<span class="fc bfc" id="L304" title="All 2 branches covered.">        return quantum != null;</span>
    }

    public KeyOrder getKeyOrder()
    {
<span class="nc" id="L309">        return keyOrder;</span>
    }

    public boolean hasKeyOrder()
    {
<span class="pc bpc" id="L314" title="1 of 2 branches missed.">        return keyOrder != null;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>