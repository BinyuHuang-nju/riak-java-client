<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BucketProperties.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Riak Client for Java</a> &gt; <a href="index.source.html" class="el_package">com.basho.riak.client.core.query</a> &gt; <span class="el_source">BucketProperties.java</span></div><h1>BucketProperties.java</h1><pre class="source lang-java linenums">/*
 * Copyright 2013 Basho Technoilogies Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.basho.riak.client.core.query;

import com.basho.riak.client.api.cap.Quorum;
import com.basho.riak.client.core.query.functions.Function;
import java.util.LinkedList;
import java.util.List;

/**
 * Bucket properties used for buckets and bucket types.
 *
 * Note that when instantiating a new instance there are no default values.
 * Calling a getter for a specific property will return null if it has not been
 * explicitly set. Unset properties are ignored when writing to a bucket or
 * bucket type in Riak.
 *
 * @author Brian Roach &lt;roach at basho dot com&gt;
 * @since 2.0
 */
public class BucketProperties
{
    private final Function linkwalkFunction;
    private final Function chashKeyFunction;
    private final Quorum rw;
    private final Quorum dw;
    private final Quorum w;
    private final Quorum r;
    private final Quorum pr;
    private final Quorum pw;
    private final Boolean notFoundOk;
    private final Boolean basicQuorum;
    private final List&lt;Function&gt; precommitHooks;
    private final List&lt;Function&gt; postcommitHooks;
    private final Long oldVClock;
    private final Long youngVClock;
    private final Long bigVClock;
    private final Long smallVClock;
    private final String backend;
    private final Integer nVal;
    private final Boolean lastWriteWins;
    private final Boolean allowSiblings;
    private final Boolean search;
    private final String yokozunaIndex;
    private final Integer hllPrecision;

    private BucketProperties(Builder builder)
<span class="nc" id="L61">    {</span>
<span class="nc" id="L62">        this.allowSiblings = builder.allowSiblings;</span>
<span class="nc" id="L63">        this.backend = builder.backend;</span>
<span class="nc" id="L64">        this.basicQuorum = builder.basicQuorum;</span>
<span class="nc" id="L65">        this.bigVClock = builder.bigVClock;</span>
<span class="nc" id="L66">        this.chashKeyFunction = builder.chashKeyFunction;</span>
<span class="nc" id="L67">        this.dw = builder.dw;</span>
<span class="nc" id="L68">        this.lastWriteWins = builder.lastWriteWins;</span>
<span class="nc" id="L69">        this.linkwalkFunction = builder.linkwalkFunction;</span>
<span class="nc" id="L70">        this.nVal = builder.nVal;</span>
<span class="nc" id="L71">        this.notFoundOk = builder.notFoundOk;</span>
<span class="nc" id="L72">        this.oldVClock = builder.oldVClock;</span>
<span class="nc" id="L73">        this.postcommitHooks = builder.postcommitHooks;</span>
<span class="nc" id="L74">        this.pr = builder.pr;</span>
<span class="nc" id="L75">        this.precommitHooks = builder.precommitHooks;</span>
<span class="nc" id="L76">        this.pw = builder.pw;</span>
<span class="nc" id="L77">        this.r = builder.r;</span>
<span class="nc" id="L78">        this.rw = builder.rw;</span>
<span class="nc" id="L79">        this.search = builder.search;</span>
<span class="nc" id="L80">        this.smallVClock = builder.smallVClock;</span>
<span class="nc" id="L81">        this.w = builder.w;</span>
<span class="nc" id="L82">        this.yokozunaIndex = builder.yokozunaIndex;</span>
<span class="nc" id="L83">        this.youngVClock = builder.youngVClock;</span>
<span class="nc" id="L84">        this.hllPrecision = builder.hllPrecision;</span>
<span class="nc" id="L85">    }</span>

    /**
     * Determine if a linkfun value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasLinkwalkFunction()
    {
<span class="nc bnc" id="L94" title="All 2 branches missed.">        return linkwalkFunction != null;</span>
    }

    /**
     * Get the linkfun value.
     *
     * @return the link walking function for the bucket, or null.
     */
    public Function getLinkwalkFunction()
    {
<span class="nc" id="L104">        return linkwalkFunction;</span>
    }

    /**
     * Determine if a chash_keyfun value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasChashKeyFunction()
    {
<span class="nc bnc" id="L114" title="All 2 branches missed.">        return chashKeyFunction != null;</span>
    }

    /**
     * Get the chash_keyfun value.
     *
     * @return the key hashing function for the bucket, or null.
     */
    public Function getChashKeyFunction()
    {
<span class="nc" id="L124">        return chashKeyFunction;</span>
    }

    /**
     * Determine if an rw value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasRw()
    {
<span class="nc bnc" id="L134" title="All 2 branches missed.">        return rw != null;</span>
    }

    /**
     * Get the rw value.
     *
     * @return the rw value as a Quorum, or null if not set.
     */
    public Quorum getRw()
    {
<span class="nc" id="L144">        return rw;</span>
    }

    /**
     * Determine if a dw value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasDw()
    {
<span class="nc bnc" id="L154" title="All 2 branches missed.">        return rw != null;</span>
    }

    /**
     * Get the dw value.
     *
     * @return the dw value as a Quorum, or null if not set.
     */
    public Quorum getDw()
    {
<span class="nc" id="L164">        return dw;</span>
    }

    /**
     * Determine if a w value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasW()
    {
<span class="nc bnc" id="L174" title="All 2 branches missed.">        return w != null;</span>
    }

    /**
     * Get the w value.
     *
     * @return the w value as a Quorum, or null if not set.
     */
    public Quorum getW()
    {
<span class="nc" id="L184">        return w;</span>
    }

    /**
     * Determine if an r value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasR()
    {
<span class="nc bnc" id="L194" title="All 2 branches missed.">        return r != null;</span>
    }

    /**
     * Get the r value.
     *
     * @return the r value as a Quorum, or null if not set.
     */
    public Quorum getR()
    {
<span class="nc" id="L204">        return this.r;</span>
    }

    /**
     * Determine if a pr value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasPr()
    {
<span class="nc bnc" id="L214" title="All 2 branches missed.">        return pr != null;</span>
    }

    /**
     * Get the pr value.
     *
     * @return the pr value as a Quorum, or null.
     */
    public Quorum getPr()
    {
<span class="nc" id="L224">        return pr;</span>
    }

    /**
     * Determine if a pw value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasPw()
    {
<span class="nc bnc" id="L234" title="All 2 branches missed.">        return pw != null;</span>
    }

    /**
     * Set the pw value.
     *
     * @return the pw value as a Quorum, or null.
     */
    public Quorum getPw()
    {
<span class="nc" id="L244">        return pw;</span>
    }

    /**
     * Determine if a not_found_ok value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasNotFoundOk()
    {
<span class="nc bnc" id="L254" title="All 2 branches missed.">        return notFoundOk != null;</span>
    }

    /**
     * Get the not_found_ok value.
     *
     * @return the not_found_ok value or null if not set.
     * @see BucketProperties.Builder#withNotFoundOk(boolean)
     */
    public Boolean getNotFoundOk()
    {
<span class="nc" id="L265">        return notFoundOk;</span>
    }

    /**
     * Determine if a basic_quorum value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasBasicQuorum()
    {
<span class="nc bnc" id="L275" title="All 2 branches missed.">        return basicQuorum != null;</span>
    }

    /**
     * Get the basic_quorum value.
     *
     * @return the basic_quorum value, or null if not set.
     * @see BucketProperties.Builder#withBasicQuorum(boolean)
     */
    public Boolean getBasicQuorum()
    {
<span class="nc" id="L286">        return basicQuorum;</span>
    }

    /**
     * Determine if any pre-commit hooks have been added.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasPrecommitHooks()
    {
<span class="nc bnc" id="L296" title="All 2 branches missed.">        return !precommitHooks.isEmpty();</span>
    }

    /**
     * Get the list of pre-commit hooks.
     *
     * @return a List containing the pre-commit hooks.
     * @see
     * BucketProperties.Builder#withPrecommitHook(com.basho.riak.client.core.query.functions.Function)
     */
    public List&lt;Function&gt; getPrecommitHooks()
    {
<span class="nc" id="L308">        return precommitHooks;</span>
    }

    /**
     * Determine if any post-commit hooks have been added.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasPostcommitHooks()
    {
<span class="nc bnc" id="L318" title="All 2 branches missed.">        return !postcommitHooks.isEmpty();</span>
    }

    /**
     * Get the list of post-commit hooks.
     *
     * @return a List containing the post-commit hooks
     * @see
     * BucketProperties.Builder#withPostcommitHook(com.basho.riak.client.core.query.functions.Function)
     */
    public List&lt;Function&gt; getPostcommitHooks()
    {
<span class="nc" id="L330">        return postcommitHooks;</span>
    }

    /**
     * Determine if an old_vclock value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasOldVClock()
    {
<span class="nc bnc" id="L340" title="All 2 branches missed.">        return oldVClock != null;</span>
    }

    /**
     * Get the old_vclock value.
     *
     * @return the old_vclock value as a long or null if not set.
     * @see BucketProperties.Builder#withOldVClock(long)
     */
    public Long getOldVClock()
    {
<span class="nc" id="L351">        return oldVClock;</span>
    }

    /**
     * Determine if an young_vclock value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasYoungVClock()
    {
<span class="nc bnc" id="L361" title="All 2 branches missed.">        return youngVClock != null;</span>
    }

    /**
     * Get the young_vclock value.
     *
     * @return the young_vclock value as an long or null if not set.
     * @see BucketProperties.Builder#withYoungVClock(long)
     */
    public Long getYoungVClock()
    {
<span class="nc" id="L372">        return youngVClock;</span>
    }

    /**
     * Determine if an big_vclock value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasBigVClock()
    {
<span class="nc bnc" id="L382" title="All 2 branches missed.">        return bigVClock != null;</span>
    }

    /**
     * Get the big_vclock value.
     *
     * @return the big_vclock value as a long or null if not set.
     * @see BucketProperties.Builder#withBigVClock(long)
     */
    public Long getBigVClock()
    {
<span class="nc" id="L393">        return bigVClock;</span>
    }

    /**
     * Determine if an small_vclock value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasSmallVClock()
    {
<span class="nc bnc" id="L403" title="All 2 branches missed.">        return smallVClock != null;</span>
    }

    /**
     * Get the small_vclock value.
     *
     * @return the small_vclock value as a long or null if not set.
     * @see BucketProperties.Builder#withSmallVClock(long)
     */
    public Long getSmallVClock()
    {
<span class="nc" id="L414">        return smallVClock;</span>
    }

    /**
     * Determine if an backend value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasBackend()
    {
<span class="nc bnc" id="L424" title="All 2 branches missed.">        return backend != null;</span>
    }

    /**
     * Get the backend. Only applies when using {@code riak_kv_multi_backend} in
     * Riak.
     *
     * @return the name of the backend or null if not set.
     */
    public String getBackend()
    {
<span class="nc" id="L435">        return backend;</span>
    }

    /**
     * Determine if an nVal value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasNVal()
    {
<span class="nc bnc" id="L445" title="All 2 branches missed.">        return nVal != null;</span>
    }

    /**
     * Get the nVal.
     *
     * @return the nVal value or null if not set.
     */
    public Integer getNVal()
    {
<span class="nc" id="L455">        return nVal;</span>
    }

    /**
     * Determine if a last_write_wins value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasLastWriteWins()
    {
<span class="nc bnc" id="L465" title="All 2 branches missed.">        return lastWriteWins != null;</span>
    }

    /**
     * Get the last_write_wins value.
     *
     * @return the last_write_wins value or null if not set.
     */
    public Boolean getLastWriteWins()
    {
<span class="nc" id="L475">        return lastWriteWins;</span>
    }

    /**
     * Determine if an allow_multi value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasAllowMulti()
    {
<span class="nc bnc" id="L485" title="All 2 branches missed.">        return allowSiblings != null;</span>
    }

    /**
     * Get the allow_multi value.
     *
     * @return the allow_multi value or null if not set.
     */
    public Boolean getAllowMulti()
    {
<span class="nc" id="L495">        return allowSiblings;</span>
    }

    /**
     * Determine if legacy Riak Search has been enabled.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasLegacyRiakSearchEnabled()
    {
<span class="nc bnc" id="L505" title="All 2 branches missed.">        return search != null;</span>
    }

    /**
     * Determine if legacy Riak Search is enabled.
     *
     * @return true if Riak Search is enabled, false otherwise.
     */
    public Boolean getLegacyRiakSearchEnabled()
    {
<span class="nc" id="L515">        return search;</span>
    }

    /**
     * Determine if a Yokozuna Index has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasSearchIndex()
    {
<span class="nc bnc" id="L525" title="All 2 branches missed.">        return yokozunaIndex != null;</span>
    }

    /**
     * Get the associated Yokozuna Index.
     *
     * @return the Yokozuna index name or null if not set.
     */
    public String getSearchIndex()
    {
<span class="nc" id="L535">        return yokozunaIndex;</span>
    }

    /**
     * Determine if an hllPrecision value has been set.
     *
     * @return true if set, false otherwise.
     */
    public boolean hasHllPrecision()
    {
<span class="nc bnc" id="L545" title="All 2 branches missed.">        return hllPrecision != null;</span>
    }

    /**
     * Get the HyperLogLog Precision.
     *
     * @return the hllPrecision value or null if not set.
     */
    public Integer getHllPrecision()
    {
<span class="nc" id="L555">        return hllPrecision;</span>
    }

    @Override
    public String toString()
    {
<span class="nc" id="L561">        return String.format(&quot;DefaultBucketProperties [allowSiblings=%s, &quot;</span>
            + &quot;lastWriteWins=%s, nVal=%s, backend=%s,  &quot;
            + &quot;capProps=[rw=%s,dw=%s,w=%s,r=%s,pr=%s,pw=%s],&quot;
            + &quot;vclockProps=[oldVClock=%s, youngVClock=%s, bigVClock=%s, smallVClock=%s],&quot;
            + &quot;precommitHooks=%s, postcommitHooks=%s, &quot;
            + &quot;, chashKeyFunction=%s, linkWalkFunction=%s, search=%s,&quot;
            + &quot;yokozunaIndex=%s, hllPrecision=%s]&quot;,
                             allowSiblings, lastWriteWins, nVal, backend, rw, dw,
                             w, r, pr, pw, oldVClock, youngVClock, bigVClock, smallVClock,
                             precommitHooks, postcommitHooks,
                             chashKeyFunction, linkwalkFunction, search,
                             yokozunaIndex, hllPrecision);
    }

    @Override
    public boolean equals(Object o)
    {
<span class="nc bnc" id="L578" title="All 2 branches missed.">        if (this == o)</span>
        {
<span class="nc" id="L580">            return true;</span>
        }
<span class="nc bnc" id="L582" title="All 4 branches missed.">        if (o == null || getClass() != o.getClass())</span>
        {
<span class="nc" id="L584">            return false;</span>
        }

<span class="nc" id="L587">        BucketProperties that = (BucketProperties) o;</span>

<span class="nc bnc" id="L589" title="All 6 branches missed.">        if (linkwalkFunction != null ? !linkwalkFunction.equals(that.linkwalkFunction) : that.linkwalkFunction != null)</span>
        {
<span class="nc" id="L591">            return false;</span>
        }
<span class="nc bnc" id="L593" title="All 6 branches missed.">        if (chashKeyFunction != null ? !chashKeyFunction.equals(that.chashKeyFunction) : that.chashKeyFunction != null)</span>
        {
<span class="nc" id="L595">            return false;</span>
        }
<span class="nc bnc" id="L597" title="All 6 branches missed.">        if (rw != null ? !rw.equals(that.rw) : that.rw != null)</span>
        {
<span class="nc" id="L599">            return false;</span>
        }
<span class="nc bnc" id="L601" title="All 6 branches missed.">        if (dw != null ? !dw.equals(that.dw) : that.dw != null)</span>
        {
<span class="nc" id="L603">            return false;</span>
        }
<span class="nc bnc" id="L605" title="All 6 branches missed.">        if (w != null ? !w.equals(that.w) : that.w != null)</span>
        {
<span class="nc" id="L607">            return false;</span>
        }
<span class="nc bnc" id="L609" title="All 6 branches missed.">        if (r != null ? !r.equals(that.r) : that.r != null)</span>
        {
<span class="nc" id="L611">            return false;</span>
        }
<span class="nc bnc" id="L613" title="All 6 branches missed.">        if (pr != null ? !pr.equals(that.pr) : that.pr != null)</span>
        {
<span class="nc" id="L615">            return false;</span>
        }
<span class="nc bnc" id="L617" title="All 6 branches missed.">        if (pw != null ? !pw.equals(that.pw) : that.pw != null)</span>
        {
<span class="nc" id="L619">            return false;</span>
        }
<span class="nc bnc" id="L621" title="All 6 branches missed.">        if (notFoundOk != null ? !notFoundOk.equals(that.notFoundOk) : that.notFoundOk != null)</span>
        {
<span class="nc" id="L623">            return false;</span>
        }
<span class="nc bnc" id="L625" title="All 6 branches missed.">        if (basicQuorum != null ? !basicQuorum.equals(that.basicQuorum) : that.basicQuorum != null)</span>
        {
<span class="nc" id="L627">            return false;</span>
        }
<span class="nc bnc" id="L629" title="All 6 branches missed.">        if (precommitHooks != null ? !precommitHooks.equals(that.precommitHooks) : that.precommitHooks != null)</span>
        {
<span class="nc" id="L631">            return false;</span>
        }
<span class="nc bnc" id="L633" title="All 6 branches missed.">        if (postcommitHooks != null ? !postcommitHooks.equals(that.postcommitHooks) : that.postcommitHooks != null)</span>
        {
<span class="nc" id="L635">            return false;</span>
        }
<span class="nc bnc" id="L637" title="All 6 branches missed.">        if (oldVClock != null ? !oldVClock.equals(that.oldVClock) : that.oldVClock != null)</span>
        {
<span class="nc" id="L639">            return false;</span>
        }
<span class="nc bnc" id="L641" title="All 6 branches missed.">        if (youngVClock != null ? !youngVClock.equals(that.youngVClock) : that.youngVClock != null)</span>
        {
<span class="nc" id="L643">            return false;</span>
        }
<span class="nc bnc" id="L645" title="All 6 branches missed.">        if (bigVClock != null ? !bigVClock.equals(that.bigVClock) : that.bigVClock != null)</span>
        {
<span class="nc" id="L647">            return false;</span>
        }
<span class="nc bnc" id="L649" title="All 6 branches missed.">        if (smallVClock != null ? !smallVClock.equals(that.smallVClock) : that.smallVClock != null)</span>
        {
<span class="nc" id="L651">            return false;</span>
        }
<span class="nc bnc" id="L653" title="All 6 branches missed.">        if (backend != null ? !backend.equals(that.backend) : that.backend != null)</span>
        {
<span class="nc" id="L655">            return false;</span>
        }
<span class="nc bnc" id="L657" title="All 6 branches missed.">        if (nVal != null ? !nVal.equals(that.nVal) : that.nVal != null)</span>
        {
<span class="nc" id="L659">            return false;</span>
        }
<span class="nc bnc" id="L661" title="All 6 branches missed.">        if (lastWriteWins != null ? !lastWriteWins.equals(that.lastWriteWins) : that.lastWriteWins != null)</span>
        {
<span class="nc" id="L663">            return false;</span>
        }
<span class="nc bnc" id="L665" title="All 6 branches missed.">        if (allowSiblings != null ? !allowSiblings.equals(that.allowSiblings) : that.allowSiblings != null)</span>
        {
<span class="nc" id="L667">            return false;</span>
        }
<span class="nc bnc" id="L669" title="All 6 branches missed.">        if (search != null ? !search.equals(that.search) : that.search != null)</span>
        {
<span class="nc" id="L671">            return false;</span>
        }
<span class="nc bnc" id="L673" title="All 6 branches missed.">        if (yokozunaIndex != null ? !yokozunaIndex.equals(that.yokozunaIndex) : that.yokozunaIndex != null)</span>
        {
<span class="nc" id="L675">            return false;</span>
        }
<span class="nc bnc" id="L677" title="All 4 branches missed.">        return hllPrecision != null ? hllPrecision.equals(that.hllPrecision) : that.hllPrecision == null;</span>

    }

    @Override
    public int hashCode()
    {
<span class="nc bnc" id="L684" title="All 2 branches missed.">        int result = linkwalkFunction != null ? linkwalkFunction.hashCode() : 0;</span>
<span class="nc bnc" id="L685" title="All 2 branches missed.">        result = 31 * result + (chashKeyFunction != null ? chashKeyFunction.hashCode() : 0);</span>
<span class="nc bnc" id="L686" title="All 2 branches missed.">        result = 31 * result + (rw != null ? rw.hashCode() : 0);</span>
<span class="nc bnc" id="L687" title="All 2 branches missed.">        result = 31 * result + (dw != null ? dw.hashCode() : 0);</span>
<span class="nc bnc" id="L688" title="All 2 branches missed.">        result = 31 * result + (w != null ? w.hashCode() : 0);</span>
<span class="nc bnc" id="L689" title="All 2 branches missed.">        result = 31 * result + (r != null ? r.hashCode() : 0);</span>
<span class="nc bnc" id="L690" title="All 2 branches missed.">        result = 31 * result + (pr != null ? pr.hashCode() : 0);</span>
<span class="nc bnc" id="L691" title="All 2 branches missed.">        result = 31 * result + (pw != null ? pw.hashCode() : 0);</span>
<span class="nc bnc" id="L692" title="All 2 branches missed.">        result = 31 * result + (notFoundOk != null ? notFoundOk.hashCode() : 0);</span>
<span class="nc bnc" id="L693" title="All 2 branches missed.">        result = 31 * result + (basicQuorum != null ? basicQuorum.hashCode() : 0);</span>
<span class="nc bnc" id="L694" title="All 2 branches missed.">        result = 31 * result + (precommitHooks != null ? precommitHooks.hashCode() : 0);</span>
<span class="nc bnc" id="L695" title="All 2 branches missed.">        result = 31 * result + (postcommitHooks != null ? postcommitHooks.hashCode() : 0);</span>
<span class="nc bnc" id="L696" title="All 2 branches missed.">        result = 31 * result + (oldVClock != null ? oldVClock.hashCode() : 0);</span>
<span class="nc bnc" id="L697" title="All 2 branches missed.">        result = 31 * result + (youngVClock != null ? youngVClock.hashCode() : 0);</span>
<span class="nc bnc" id="L698" title="All 2 branches missed.">        result = 31 * result + (bigVClock != null ? bigVClock.hashCode() : 0);</span>
<span class="nc bnc" id="L699" title="All 2 branches missed.">        result = 31 * result + (smallVClock != null ? smallVClock.hashCode() : 0);</span>
<span class="nc bnc" id="L700" title="All 2 branches missed.">        result = 31 * result + (backend != null ? backend.hashCode() : 0);</span>
<span class="nc bnc" id="L701" title="All 2 branches missed.">        result = 31 * result + (nVal != null ? nVal.hashCode() : 0);</span>
<span class="nc bnc" id="L702" title="All 2 branches missed.">        result = 31 * result + (lastWriteWins != null ? lastWriteWins.hashCode() : 0);</span>
<span class="nc bnc" id="L703" title="All 2 branches missed.">        result = 31 * result + (allowSiblings != null ? allowSiblings.hashCode() : 0);</span>
<span class="nc bnc" id="L704" title="All 2 branches missed.">        result = 31 * result + (search != null ? search.hashCode() : 0);</span>
<span class="nc bnc" id="L705" title="All 2 branches missed.">        result = 31 * result + (yokozunaIndex != null ? yokozunaIndex.hashCode() : 0);</span>
<span class="nc bnc" id="L706" title="All 2 branches missed.">        result = 31 * result + (hllPrecision != null ? hllPrecision.hashCode() : 0);</span>
<span class="nc" id="L707">        return result;</span>
    }

    public static class Builder
    {
        private Function linkwalkFunction;
        private Function chashKeyFunction;
        private Quorum rw;
        private Quorum dw;
        private Quorum w;
        private Quorum r;
        private Quorum pr;
        private Quorum pw;
        private Boolean notFoundOk;
        private Boolean basicQuorum;
<span class="nc" id="L722">        private final List&lt;Function&gt; precommitHooks = new LinkedList&lt;&gt;();</span>
<span class="nc" id="L723">        private final List&lt;Function&gt; postcommitHooks = new LinkedList&lt;&gt;();</span>
        private Long oldVClock;
        private Long youngVClock;
        private Long bigVClock;
        private Long smallVClock;
        private String backend;
        private Integer nVal;
        private Boolean lastWriteWins;
        private Boolean allowSiblings;
        private Boolean search;
        private String yokozunaIndex;
        private Integer hllPrecision;

        public Builder()
<span class="nc" id="L737">        {</span>
<span class="nc" id="L738">        }</span>

        /**
         * Set the allow_multi value.
         *
         * @param allow whether to allow sibling objects to be created.
         * @return a reference to this object.
         */
        public Builder withAllowMulti(boolean allow)
        {
<span class="nc" id="L748">            this.allowSiblings = allow;</span>
<span class="nc" id="L749">            return this;</span>
        }

        /**
         * Set the backend used by this bucket. Only applies when using
         * {@code riak_kv_multi_backend} in Riak.
         *
         * @param backend the name of the backend to use.
         * @return a reference to this object.
         */
        public Builder withBackend(String backend)
        {
<span class="nc bnc" id="L761" title="All 4 branches missed.">            if (null == backend || backend.length() == 0)</span>
            {
<span class="nc" id="L763">                throw new IllegalArgumentException(&quot;Backend can not be null or zero length&quot;);</span>
            }
<span class="nc" id="L765">            this.backend = backend;</span>
<span class="nc" id="L766">            return this;</span>
        }

        /**
         * Set the basic_quorum value.
         *
         * The parameter controls whether a read request should return early in
         * some fail cases. E.g. If a quorum of nodes has already returned
         * notfound/error, don't wait around for the rest.
         *
         * @param use the basic_quorum value.
         * @return a reference to this object.
         */
        public Builder withBasicQuorum(boolean use)
        {
<span class="nc" id="L781">            this.basicQuorum = use;</span>
<span class="nc" id="L782">            return this;</span>
        }

        /**
         * Set the big_vclock value.
         *
         * @param bigVClock a long representing a epoch time value.
         * @return a reference to this object.
         * @see &lt;a
         * href=&quot;http://docs.basho.com/riak/latest/theory/concepts/Vector-Clocks/#Vector-Clock-Pruning&quot;&gt;Vector
         * Clock Pruning&lt;/a&gt;
         */
        public Builder withBigVClock(long bigVClock)
        {
<span class="nc" id="L796">            this.bigVClock = bigVClock;</span>
<span class="nc" id="L797">            return this;</span>
        }

        /**
         * Set the chash_keyfun value.
         *
         * @param func a Function representing the Erlang func to use.
         * @return a reference to this object.
         */
        public Builder withChashkeyFunction(Function func)
        {
<span class="nc" id="L808">            verifyErlangFunc(func);</span>
<span class="nc" id="L809">            this.chashKeyFunction = func;</span>
<span class="nc" id="L810">            return this;</span>
        }

        /**
         * Set the last_write_wins value. Unless you really know what you're
         * doing, you probably do not want to set this to true.
         *
         * @param wins whether to ignore vector clocks when writing.
         * @return a reference to this object.
         */
        public Builder withLastWriteWins(boolean wins)
        {
<span class="nc" id="L822">            this.lastWriteWins = wins;</span>
<span class="nc" id="L823">            return this;</span>
        }

        /**
         * Set the linkfun value.
         *
         * @param func a Function representing the Erlang func to use.
         * @return a reference to this object.
         */
        public Builder withLinkwalkFunction(Function func)
        {
<span class="nc" id="L834">            verifyErlangFunc(func);</span>
<span class="nc" id="L835">            this.linkwalkFunction = func;</span>
<span class="nc" id="L836">            return this;</span>
        }

        /**
         * Set the rw value. Individual requests (or buckets in a bucket type)
         * can override this.
         *
         * @param rw the rw value as an integer.
         * @return a reference to this object.
         */
        public Builder withRw(int rw)
        {
<span class="nc" id="L848">            this.rw = new Quorum(rw);</span>
<span class="nc" id="L849">            return this;</span>
        }

        /**
         * Set the rw value. Individual requests (or buckets in a bucket type)
         * can override this.
         *
         * @param rw the rw value as a Quorum.
         * @return a reference to this object.
         */
        public Builder withRw(Quorum rw)
        {
<span class="nc" id="L861">            this.rw = rw;</span>
<span class="nc" id="L862">            return this;</span>
        }

        /**
         * Set the dw value. Individual requests (or buckets in a bucket type)
         * can override this.
         *
         * @param dw the dw value as an integer.
         * @return a reference to this object.
         */
        public Builder withDw(int dw)
        {
<span class="nc" id="L874">            this.dw = new Quorum(dw);</span>
<span class="nc" id="L875">            return this;</span>
        }

        /**
         * Set the w value. Individual requests (or buckets in a bucket type)
         * can override this.
         *
         * @param w the w value as an integer.
         * @return a reference to this object.
         */
        public Builder withW(int w)
        {
<span class="nc" id="L887">            this.w = new Quorum(w);</span>
<span class="nc" id="L888">            return this;</span>
        }

        /**
         * Set the w value. Individual requests (or buckets in a bucket type)
         * can override this.
         *
         * @param w the w value as a Quorum.
         * @return a reference to this object.
         */
        public Builder withW(Quorum w)
        {
<span class="nc" id="L900">            this.w = w;</span>
<span class="nc" id="L901">            return this;</span>
        }

        /**
         * Set the r value. Individual requests (or buckets in a bucket type)
         * can override this.
         *
         * @param r the r value as an integer.
         * @return a reference to this object.
         */
        public Builder withR(int r)
        {
<span class="nc" id="L913">            this.r = new Quorum(r);</span>
<span class="nc" id="L914">            return this;</span>
        }

        /**
         * Set the r value. Individual requests (or buckets in a bucket type)
         * can override this.
         *
         * @param r the r value as a Quorum.
         * @return a reference to this object.
         */
        public Builder withR(Quorum r)
        {
<span class="nc" id="L926">            this.r = r;</span>
<span class="nc" id="L927">            return this;</span>
        }

        /**
         * Set the pr value. Individual requests (or buckets in a bucket type)
         * can override this.
         *
         * @param pr the pr value as an integer.
         * @return a reference to this object.
         */
        public Builder withPr(int pr)
        {
<span class="nc" id="L939">            this.pr = new Quorum(pr);</span>
<span class="nc" id="L940">            return this;</span>
        }

        /**
         * Set the pr value. Individual requests (or buckets in a bucket type)
         * can override this.
         *
         * @param pr the pr value as a Quorum.
         * @return a reference to this object.
         */
        public Builder withPr(Quorum pr)
        {
<span class="nc" id="L952">            this.pr = pr;</span>
<span class="nc" id="L953">            return this;</span>
        }

        /**
         * Set the pw value. Individual requests (or buckets in a bucket type)
         * can override this.
         *
         * @param pw the pw value as an integer.
         * @return a reference to this object.
         */
        public Builder withPw(int pw)
        {
<span class="nc" id="L965">            this.pw = new Quorum(pw);</span>
<span class="nc" id="L966">            return this;</span>
        }

        /**
         * Set the pw value. Individual requests (or buckets in a bucket type)
         * can override this.
         *
         * @param pw the pw value as a Quorum.
         * @return a reference to this object.
         */
        public Builder withPw(Quorum pw)
        {
<span class="nc" id="L978">            this.pw = pw;</span>
<span class="nc" id="L979">            return this;</span>
        }

        /**
         * Set the not_found_ok value. If true a vnode returning notfound for a
         * key increments the r tally. False is higher consistency, true is
         * higher availability.
         *
         * @param ok the not_found_ok value.
         * @return a reference to this object.
         */
        public Builder withNotFoundOk(boolean ok)
        {
<span class="nc" id="L992">            this.notFoundOk = ok;</span>
<span class="nc" id="L993">            return this;</span>
        }

        /**
         * Add a pre-commit hook. The supplied Function must be an Erlang or
         * Named JS function.
         *
         * @param hook the Function to add.
         * @return a reference to this object.
         * @see &lt;a
         * href=&quot;http://docs.basho.com/riak/latest/dev/using/commit-hooks/&quot;&gt;Using
         * Commit Hooks&lt;/a&gt;
         */
        public Builder withPrecommitHook(Function hook)
        {
<span class="nc bnc" id="L1008" title="All 6 branches missed.">            if (null == hook || !(!hook.isJavascript() || hook.isNamed()))</span>
            {
<span class="nc" id="L1010">                throw new IllegalArgumentException(&quot;Must be a named JS or Erlang function.&quot;);</span>
            }

<span class="nc" id="L1013">            precommitHooks.add(hook);</span>
<span class="nc" id="L1014">            return this;</span>
        }

        /**
         * Add a post-commit hook. The supplied Function must be an Erlang or
         * Named JS function.
         *
         * @param hook the Function to add.
         * @return a reference to this object.
         * @see &lt;a
         * href=&quot;http://docs.basho.com/riak/latest/dev/using/commit-hooks/&quot;&gt;Using
         * Commit Hooks&lt;/a&gt;
         */
        public Builder withPostcommitHook(Function hook)
        {
<span class="nc" id="L1029">            verifyErlangFunc(hook);</span>
<span class="nc" id="L1030">            postcommitHooks.add(hook);</span>
<span class="nc" id="L1031">            return this;</span>
        }

        /**
         * Set the old_vclock value.
         *
         * @param oldVClock an long representing a epoch time value.
         * @return a reference to this object.
         * @see &lt;a
         * href=&quot;http://docs.basho.com/riak/latest/theory/concepts/Vector-Clocks/#Vector-Clock-Pruning&quot;&gt;Vector
         * Clock Pruning&lt;/a&gt;
         */
        public Builder withOldVClock(long oldVClock)
        {
<span class="nc" id="L1045">            this.oldVClock = oldVClock;</span>
<span class="nc" id="L1046">            return this;</span>
        }

        /**
         * Set the young_vclock value.
         *
         * @param youngVClock a long representing a epoch time value.
         * @return a reference to this object.
         * @see &lt;a
         * href=&quot;http://docs.basho.com/riak/latest/theory/concepts/Vector-Clocks/#Vector-Clock-Pruning&quot;&gt;Vector
         * Clock Pruning&lt;/a&gt;
         */
        public Builder withYoungVClock(long youngVClock)
        {
<span class="nc" id="L1060">            this.youngVClock = youngVClock;</span>
<span class="nc" id="L1061">            return this;</span>
        }

        /**
         * Set the small_vclock value.
         *
         * @param smallVClock a long representing a epoch time value.
         * @return a reference to this object.
         * @see &lt;a
         * href=&quot;http://docs.basho.com/riak/latest/theory/concepts/Vector-Clocks/#Vector-Clock-Pruning&quot;&gt;Vector
         * Clock Pruning&lt;/a&gt;
         */
        public Builder withSmallVClock(long smallVClock)
        {
<span class="nc" id="L1075">            this.smallVClock = smallVClock;</span>
<span class="nc" id="L1076">            return this;</span>
        }

        /**
         * Set the nVal.
         *
         * @param nVal the number of replicas.
         * @return a reference to this object.
         */
        public Builder withNVal(int nVal)
        {
<span class="nc bnc" id="L1087" title="All 2 branches missed.">            if (nVal &lt;= 0)</span>
            {
<span class="nc" id="L1089">                throw new IllegalArgumentException(&quot;nVal must be &gt;= 1&quot;);</span>
            }
<span class="nc" id="L1091">            this.nVal = nVal;</span>
<span class="nc" id="L1092">            return this;</span>
        }

        /**
         * Enable Legacy Riak Search. Setting this to true causes the search pre-commit
         * hook to be added.
         *
         * &lt;b&gt;Note this is only for legacy Riak (&amp;lt; v2.0) Search support.&lt;/b&gt;
         *
         * @param enable add/remove (true/false) the pre-commit hook for Riak
         * Search.
         * @return a reference to this object.
         */
        public Builder withLegacyRiakSearchEnabled(boolean enable)
        {
<span class="nc" id="L1107">            search = enable;</span>
<span class="nc" id="L1108">            return this;</span>
        }

        /**
         * Associate a Search Index. This only applies if Yokozuna is enabled
         * in Riak.
         *
         * @param indexName The name of the Yokozuna Index to use.
         * @return a reference to this object.
         */
        public Builder withSearchIndex(String indexName)
        {
<span class="nc bnc" id="L1120" title="All 4 branches missed.">            if (null == indexName || indexName.length() == 0)</span>
            {
<span class="nc" id="L1122">                throw new IllegalArgumentException(&quot;Index name cannot be null or zero length&quot;);</span>
            }
<span class="nc" id="L1124">            this.yokozunaIndex = indexName;</span>
<span class="nc" id="L1125">            return this;</span>
        }

        /**
         * Set the HyperLogLog Precision.
         *
         * @param precision the number of bits to use in the HyperLogLog precision.
         *                  Valid values are [4 - 16] inclusive, default is 14 on new buckets.
         *                  &lt;b&gt;NOTE:&lt;/b&gt; When changing precision, it may only be reduced from
         *                  it's current value, and never increased.
         * @return a reference to this object.
         */
        public Builder withHllPrecision(int precision)
        {
<span class="nc bnc" id="L1139" title="All 4 branches missed.">            if (precision &lt; 4 || precision &gt; 16)</span>
            {
<span class="nc" id="L1141">                throw new IllegalArgumentException(&quot;Precision must be between 4 and 16, inclusive.&quot;);</span>
            }
<span class="nc" id="L1143">            this.hllPrecision = precision;</span>
<span class="nc" id="L1144">            return this;</span>
        }

        public BucketProperties build()
        {
<span class="nc" id="L1149">            return new BucketProperties(this);</span>
        }

        private void verifyErlangFunc(Function f)
        {
<span class="nc bnc" id="L1154" title="All 4 branches missed.">            if (null == f || f.isJavascript())</span>
            {
<span class="nc" id="L1156">                throw new IllegalArgumentException(&quot;Must be an Erlang Function.&quot;);</span>
            }
<span class="nc" id="L1158">        }</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>